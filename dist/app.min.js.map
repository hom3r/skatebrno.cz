{"version":3,"sources":["app.js"],"names":["createInfowindow","name","street","city","google","maps","InfoWindow","content","removeMarkers","marker","i","markers","length","setMap","createFilter","filter","document","getElementById","checked","push","TYPE_PARK","TYPE_SHOP","TYPE_SPOT","TYPE_RAMP","placeMarkers","locations","infowindow","item","indexOf","type","forEach","element","icon","icon_purple","icon_yellow","icon_green","icon_red","Marker","position","map","title","event","addListener","close","open","toggleSidepanel","$","toggleClass","parent","css","click","handleLocationError","browserHasGeolocation","console","error","initMap","brno_stred","lat","lng","Map","zoom","center","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","icon_blue","ready","e","preventDefault","removeClass","change"],"mappings":"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","file":"app.min.js","sourcesContent":["function createInfowindow(name, street, city) {\n    return new google.maps.InfoWindow({\n        content: '<div class=\"bubble\"><strong>' + name + '</strong><div class=\"info\">' + street + '<br>' + city + '</div></div>'\n    });\n}\n\nvar map = null;\n\nconst icon_green = 'http://maps.google.com/mapfiles/ms/icons/green-dot.png';\nconst icon_yellow = 'http://maps.google.com/mapfiles/ms/icons/yellow-dot.png';\nconst icon_purple = 'http://maps.google.com/mapfiles/ms/icons/purple-dot.png';\nconst icon_red = 'http://maps.google.com/mapfiles/ms/icons/red-dot.png';\nconst icon_blue = 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png';\n\nconst TYPE_RAMP = 0;\nconst TYPE_PARK = 1;\nconst TYPE_SPOT = 2;\nconst TYPE_SHOP = 3;\n\nvar markers = [];\nvar locations = [\n    {\n        title: 'Obřany - rampa',\n        street: 'Černovická 568/11',\n        city: '617 00 Brno-jih-Komárov',\n        position: {lat: 49.226088, lng: 16.661595},\n        type: TYPE_RAMP,\n    },\n    {\n        title: 'Skatepark Juliánov',\n        street: 'Líšeňská 4223/46',\n        city: '636 00 Brno-Židenice',\n        position: {lat:49.196835, lng:16.656936},\n        type: TYPE_PARK,\n    },\n    {\n        title: 'Skatepark Slatina',\n        street: 'Rousínovská 1028/2',\n        city: '627 00 Brno-Slatina',\n        position: {lat:49.181990, lng:16.684940},\n        type: TYPE_PARK,\n    },\n    {\n        title: 'Skatepark Komárov',\n        street: 'Hněvkovského 71/62',\n        city: '617 00 Brno-jih',\n        position: {lat:49.169596, lng:16.624226},\n        type: TYPE_PARK,\n    },\n    {\n        title: 'Starý skatepark Komárov',\n        street: 'Černovická 568/11',\n        city: '617 00 Brno-jih-Komárov',\n        position: {lat:49.178233, lng:16.628310},\n        type: TYPE_PARK,\n    },\n    {\n        title: 'Spot za Lužánkami',\n        street: 'Sportovní 347/2',\n        city: '602 00 Brno-Královo Pole',\n        position: {lat:49.211490, lng:16.608152},\n        type: TYPE_SPOT,\n    },\n    {\n        title: 'Skatepark Bohunice',\n        street: 'Osová 717/20',\n        city: '625 00 Brno-Bohunice',\n        position: {lat:49.167178, lng:16.568799},\n        type: TYPE_PARK,\n    },\n    {\n        title: 'Minirampa na Dráze',\n        street: 'Nádražní 9',\n        city: '602 00 Brno-střed',\n        position: {lat:49.189315, lng:16.608593},\n        type: TYPE_RAMP,\n    },\n    {\n        title: 'Schody u Janáčka',\n        street: 'Sady Osvobození',\n        city: '602 00 Brno-střed',\n        position: {lat:49.198472, lng:16.610429},\n        type: TYPE_SPOT,\n    },\n    // shopy\n    {\n        title: 'Longshop',\n        street: 'Antonínská 5',\n        city: '602 00 Brno-střed',\n        position: {lat:49.202560, lng:16.605634},\n        type: TYPE_SHOP,\n    },\n    {\n        title: 'Nugget store na Orlí',\n        street: 'Orlí 478/11',\n        city: '602 00 Brno-střed',\n        position: {lat:49.193476, lng:16.611045},\n        type: TYPE_SHOP,\n    },\n\n    // {\n    //     title: '',\n    //     street: '',\n    //     city: '',\n    //     position:\n    // },\n];\n\nvar filter = [];\n\nfunction removeMarkers(){\n    var marker;\n    for (i = 0; i < markers.length; i++){\n        marker = markers[i];\n        marker.setMap(null);\n    }\n}\n\nfunction createFilter() {\n    var filter = [];\n\n    if (document.getElementById(\"parks-checkbox\").checked)\n        filter.push(TYPE_PARK);\n    if (document.getElementById(\"shops-checkbox\").checked)\n        filter.push(TYPE_SHOP);\n    if (document.getElementById(\"spots-checkbox\").checked)\n        filter.push(TYPE_SPOT);\n    if (document.getElementById(\"ramps-checkbox\").checked)\n        filter.push(TYPE_RAMP);\n\n    return filter;\n}\n\nfunction placeMarkers(locations) {\n    var infowindow = null;\n    markers = [];\n\n    filter = createFilter();\n\n    locations.filter(function(item) {\n        return filter.indexOf(item.type) !== -1;\n    }).forEach(function(element) {\n        var icon;\n\n        switch(element.type) {\n            case TYPE_SPOT:\n                icon = icon_purple;\n                break;\n            case TYPE_RAMP:\n                icon = icon_yellow;\n                break;\n            case TYPE_SHOP:\n                icon = icon_green;\n                break;\n            case TYPE_PARK:\n            default:\n                icon = icon_red;\n                break;\n        }\n        var marker = new google.maps.Marker({\n          position: element.position,\n          map: map,\n          title: element.title,\n          icon: icon,\n        });\n\n        markers.push(marker);\n\n        google.maps.event.addListener(marker, 'click', function() {\n            if (infowindow) {\n                infowindow.close();\n            }\n            infowindow = createInfowindow(element.title, element.street, element.city);\n            infowindow.open(map, marker);\n        });\n    });\n}\n\nfunction toggleSidepanel() {\n    $(\"#sidepanel\").toggleClass(\"onscreen\");\n\n    // highlight filter button\n    $(\"#toggle-sidepanel\").parent().toggleClass(\"active\");\n\n    // collapse menu on mobile version\n    if($('.navbar-toggle').css('display') !='none'){\n        $('.navbar-toggle').click();\n    }\n}\n\nfunction handleLocationError(browserHasGeolocation) {\n    console.error('location error', browserHasGeolocation);\n}\n\nfunction initMap() {\n    var brno_stred = {lat:49.194749, lng:16.609508};\n\n    map = new google.maps.Map(document.getElementById('map'), {\n        zoom: 12,\n        center: brno_stred\n    });\n\n    placeMarkers(locations);\n\n    // Try HTML5 geolocation.\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(function(position) {\n        var pos = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n\n        var current_position = new google.maps.Marker({\n          position: pos,\n        //   position: {lat:49.1992976,lng:16.6144704},\n          map: map,\n          title: 'Aktuální pozice',\n          icon: '/img/position.png',\n        //   icon: '/img/position-small.png',\n        });\n\n        // infoWindow.setPosition(pos);\n        // infoWindow.setContent('Location found.');\n        // infoWindow.open(map);\n        // map.setCenter(pos);\n      }, function() {\n        handleLocationError(true);\n      });\n    } else {\n      // Browser doesn't support Geolocation\n      handleLocationError(false);\n    }\n}\n\n$(document).ready(function() {\n    $(\"#toggle-sidepanel\").click(function(e) {\n        e.preventDefault();\n        toggleSidepanel();\n    });\n\n    $(\"#hide-filter\").click(function(e) {\n        e.preventDefault();\n        $(\"#sidepanel\").removeClass('onscreen');\n    });\n\n    $(\"#remove-markers\").click(function(e) {\n        e.preventDefault();\n        removeMarkers();\n    });\n    $(\"#place-markers\").click(function(e) {\n        e.preventDefault();\n        placeMarkers(locations);\n    });\n\n    $(\"#filter\").change(function() {\n        removeMarkers();\n        placeMarkers(locations);\n    });\n});\n"]}